<template>
    <div class="search-container">
        <i class="search-icon">üîç</i>
        <input
        type="text"
      class="search-input"
      placeholder="–ü–æ–∏—Å–∫... (–≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ –∫–æ–¥)"
      v-model="localSearch"
      @input="$emit('input', localSearch)"
        />
    </div>
</template>

<script>
export default {
    props: {
        modelValue: {
            type: Object,
            required: true,
        }
    },
    data() {
        return {
            localSearch: this.modelValue?.ActionMenuOptions?.name || "", 
        };
    },
    watch: {
        // options: {
        //     handler(newValue) {
        //         this.localSearch = newValue?.ActionMenuOptions?.name || "";
        //     },
        //     deep: true,
        // },
        localSearch: function() {
            this.updateSearch(); // –í—ã–∑—ã–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–∏—Å–∫–∞
        }
    },
    methods: {
        // updateSearch() {
        //     this.$emit("change", { ...this.options, ActionMenuOptions: {...this.options.ActionMenuOptions,name:this.localSearch} });
        // },
        updateSearch() {
    this.$emit("update:modelValue", {
      ...this.modelValue, 
      ActionMenuOptions: {
        ...this.modelValue.ActionMenuOptions, 
        name: this.localSearch,
      },
    });
    this.$emit('search', this.localSearch); 
    console.log("search emitted:", this.localSearch);
  },
    },
};
</script>

<style lang="scss" scoped>
@import "@/components/commonstyles.scss";

.search-container {
    position: relative;
    width: 300px; /* –®–∏—Ä–∏–Ω–∞ –ø–æ–ª—è –ø–æ–∏—Å–∫–∞ */
}

.search-input {
    width: 100%;
    height: 100%;
    padding: 10px 40px 10px 40px; /* –û—Ç—Å—Ç—É–ø—ã, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ –¥–ª—è –∏–∫–æ–Ω–∫–∏ */
    border: 2px solid #ccc; /* –¶–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã */
    border-radius: 25px; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
    font-size: $smallSize; /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
    transition: border-color 0.3s; /* –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Ü–≤–µ—Ç–∞ –≥—Ä–∞–Ω–∏—Ü—ã */
}

.search-input:focus {
    border-color: #007bff; /* –¶–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
    outline: none; /* –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–Ω—Ç—É—Ä */
}

.search-icon {
    position: absolute;
    left: 15px; /* –ü–æ–ª–æ–∂–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ */
    top: 50%; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    transform: translateY(-50%); /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    color: #007bff; /* –¶–≤–µ—Ç –∏–∫–æ–Ω–∫–∏ */
}
</style>
